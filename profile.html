<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <form id="editorForm" action="save.php" method="post">
    <textarea name="profileContent" id="editor"></textarea>
    <br>
    <button type="submit">Full Screen</button>
  </form>

  <script src="tinymce/js/tinymce/tinymce.min.js"></script>

  <script>
    tinymce.init({
      selector: 'textarea#editor', 
      width: 1000,
      height: 500,
      plugins: [
        'advlist', 'autolink', 'link', 'image', 'lists', 'charmap', 'preview', 'anchor', 'pagebreak',
        'searchreplace', 'wordcount', 'visualblocks', 'code', 'fullscreen', 'insertdatetime', 'media', 
        'table', 'emoticons', 'template', 'codesample'
      ],
      toolbar: 'undo redo | styles | bold italic underline | alignleft aligncenter alignright alignjustify |' + 
        'bullist numlist outdent indent | link image | print preview media fullscreen | ' +
        'forecolor backcolor emoticons',
      menu: {
        favs: {title: 'menu', items: 'code visualaid | searchreplace | emoticons'}
      },
      menubar: 'favs file edit view insert format tools table',
      content_style: 'body{font-family:Helvetica,Arial,sans-serif; font-size:16px}',

      // **Save content to local storage**
      setup: function (editor) {
        editor.on('change', function () {
          localStorage.setItem('profileContent', editor.getContent());
        });

        editor.on('init', function () {
          const savedContent = localStorage.getItem('profileContent');
          if (savedContent) {
            editor.setContent(savedContent);
          }
        });
      }
    });

    document.getElementById('editorForm').addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent form from reloading
      const content = tinymce.get('editor').getContent(); // Get TinyMCE content

      // Save content to local storage
      localStorage.setItem('submittedContent', content);

      // Redirect to the preview page
      window.location.href = "preview.html";
    });
  </script>
  
</body>
</html>